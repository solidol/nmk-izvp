[Перелік усіх робіт](README.md)

# Лабораторна робота №13. Створення класів та екземплярів класів

## Мета роботи

Навчитися створювати класи та працювати з екземплярами класів

## Обладнання

Персональний комп'ютер. Пакет програм XAMPP. Текстовий редактор Sublime Text 3 або IDE NetBeans. Web-браузер Chrome, Firefox, Opera

## Теоретичні відомості

### Класи та екземпляри класів

1. Для створення класу в PHP використовується ключове слово class. У файлі index.php створимо новий клас, що представляє користувача: 

```php 
class User
	{
	}	
```

2. Щоб створити об'єкт класу User, застосовується ключове слово new:

```php
<?php
class User
    {
    }
$user = new User;
print_r($user);
?>   		
```

3. Модифікуємо, додавши до класу User кілька властивостей та методів, які викликаються на екземплярі класу:   

```php
<?php
class User
{
    public $name, $age;
	function getInfo()
	{
		echo "Ім'я: $this->name; Вік: $this->age <br>";
	}
}
$user = new User; // Створення екземпляра класа User
// Отримуємо доступ до членів класу
$user->name = "Tom";
$user->age  = 30;
$user->getInfo();
print_r($user);
?>	
```

Зверніть увагу на використання модифікаторів доступу: 
 + private - доступні тільки всередині об'єктів цього класу, недоступні в об'єктах класів-спадкоємців;
 + protected - доступні всередині об'єктів цього класу і всіх об'єктах класів-спадкоємців. При цьому недоступні ззовні;
 + public - доступні як всередині об'єктів класу, так і зовні - можемо безпосередньо звертатися до них ззовні. Доступні об'єктам класів-спадкоємців.

4. Іноді виникає необхідність виконати ініціалізацію об'єкта - присвоїти його властивостям початкові значення. Створимо клас Person, який містить дві властивості: ім'я людини і місто його проживання. Можна написати метод, який буде виконувати ініціалізацію об'єкта, наприклад `Init()`:

```php
<?php
class Person // Створюємо новий клас Person
{
    // Властивості
    var $name;
    var $city;
    // Ініціалізуючий метод
    function Init($name)
    {
        $this->name = $name;
        $this->city = "Київ";
    }
}
$object = new Person; // Створюємо об`єкт класу Person
$object->Init(); // Для ініціалізації об`єкту одразу викликаємо метод
?>
```


5. На заміну прийшла така форма використання констструкторів `__construct()`.

Розглянемо детальніше роботу уніфікованого конструктора. Створимо файл Human.php в який помістимо клас з одноіменною назвою

```php
<?php
	class Human
	{
		var $name;
	}
	?>
```

6. Додамо конструктор до цього класу

```php
<?php
class Human
{
    var $name;
    function  __construct($nameofperson)
    {
        $this->name= $nameofperson;
    }
}
?>
```

7. Створимо об'єкти цього класу за допомогою ключового слова new та передамо у якості аргументів імена людей

```php
$firstObject = new Human("Іван");
$secondObject = new Human("Ярослав");
```

8. Додамо нову змінну до нашого класу

```php 
<?php
class Human
{
	var $name;
	var $age;
}
?>
```

9. Визначаємо конструктор ще раз, але на цей раз з двома аргументами:

```php
<?php
class Human
{
	var $name;
	function  __construct($nameofperson, $ageofperson)
	{
		$this->name= $nameofperson;
		$this->age= $ageofperson;
	}
}
?>
$firstObject = new Human("Іван", 23);
$secondObject = new Human("Ярослав", 35);
```

10. **Зауваження.** Відповідно до основ ООП PHP конструктор можна викликати НЕ більше одного разу, але ми можемо змінювати значення змінних-членів. Тому в класі Human створіть два методи, один встановлює вік, а другий - ім'я. 

```php
<?php
class Human
{
	var $name;
	function  __construct($nameofperson, $ageofperson)
	{
		$this->name= $nameofperson;
		$this->age= $ageofperson;
	}
	function set_name($newname)
	{
		$this->name=$newname;
	}
	function set_age($newage)
	{
		$this->age=$newage;
	}
}
?>
```

11. Самостійно викличіть вже створені методи та додайте два нових методи для виведення ім'я та віку

12. Підтримка деструктора для класу, що визначається як метод `__destruct()`. Коли звільняється останнє посилання на об'єкт, перед вивільненням пам'яті, що займає цей об'єкт, викликається метод-деструктор, який не приймає параметрів.

```php
<?php
class Car
{
	function __construct()
	{
		print "Constructor";
		$this->name = "Car";
	}
	function __destruct()
	{
		print "Destroying " . $this->name;
	}
}
$obj = new Car();
?>
```

Цей деструктор виводить повідомлення про те, що об'єкт був знищений.

**Зауваження!** Деструктор так само, як і конструктор, викликається тільки один раз - в момент видалення об'єкта.

### Модель

У контексті розробки програмного забезпечення, особливо в області веб-розробки та баз даних, термін "модель" використовується для опису структури та об'єктів, які відображають дані та бізнес-логіку додатку. Модель представляє собою абстракцію, яка дозволяє програмістам працювати з даними та оброблювати їх в коді.

Основні аспекти моделі включають в себе:

1. Структуру даних: Модель визначає, як дані організовані та зберігаються. Вона визначає таблиці, поля, зв'язки між ними та інші структури даних.

2. Бізнес-логіку: Модель може містити логіку, яка визначає, як дані повинні бути оброблені. Це включає в себе правила валідації, обчислення, обробку подій і багато іншого.

3. Методи доступу до даних: Модель може надавати методи для зчитування та зміни даних. Це допомагає взаємодіяти з даними, не обходячи прямий доступ до бази даних або інших джерел даних.

4. Зв'язки між об'єктами: В більш складних додатках модель може включати зв'язки між об'єктами, що дозволяє відобразити складні структури даних та взаємодії між ними.

Модель зазвичай використовується в контексті шаблону проектування "Модель-Вид-Контролер" (MVC), де вона представляє частину додатку, що відповідає за обробку даних та бізнес-логіку, а "Вид" і "Контролер" відповідають за відображення та управління взаємодією з користувачем відповідно.

Загалом, модель служить для абстрагування та організації даних та логіки додатку, що допомагає підтримувати чистий та структурований код і полегшує розробку та обслуговування програмного забезпечення.

## Хід роботи
1. Впевнитись, що пакет XAMPP встановлено та web-сервер Apache запущений
2. Перейти до каталогу `C:\xampp\htdocs\` та очистити його
3. Розгляньте приклад створення класу `Book`. Даний клас містить інформацію про книгу у властивостях `title` та `author`, а також містить методи для отримання та встановлення відповідних властивостей. 

```php
<?php
class Book
{
	private $title;
	private $author;
	public function __construct(string $title, string $author)
	{
		$this->title = $title;
		$this->author = $author;
	}
	public function getTitle()
	{
		return $this->title;
	}
	public function setTitle($title): void
	{
		$this->title = $title;
	}
	public function getAuthor()
	{
		return $this->author;
	}
	public function setAuthor($author): void
	{
		$this->author = $author;
	}
}
?>
```

4.  Розгляньте приклад 1, де клас `User` виконано як просту модель даних.
5.  На основі попередньої лабораторної роботи та індивідуального завдання створіть новий проект.
6.  Для кожної сутності зробіть окрему модель.
7.  Файл конфігурації з налаштуваннями підключення до БД винесіть окремо.
8.  Для авторизованих користувачів створіть сторінку редагування та можливість видалення записів.
9.  Впевніться, що всі вихідні HTML-сторінки є валідними, використавши валідатор HTML-коду [validator.w3.org](https://validator.w3.org/). За необхідності, виправити помилки та зауваження
10. Для проекту створіть папку "lab 13" в своєму репозиторії "web-progr" на Github. Завантажте кінцеві файли лабораторної роботи. 
11. Для кожного етапу роботи зробіть знімки екрану та додайте їх у звіт з описом кожного скіншота
12. Додайте програмний код завдання для самомтійного виконання
13. Дайте відповіді на контрольні запитання
14. Додайте в кінці звіту посилання на репозиторій та папку з лабораторною роботою
15. Збережіть звіт у форматі PDF
16. Додайте звіт до репозиторія

## Приклади

1. [Приклад 1. Головний модуль](src/lab-13/index.php)
2. [Приклад 1. Клас моделі](src/lab-13/User.php)

## Контрольні питання
1. Що таке клас та екземпляр класу в ООП?
2. Коли відбувається ініціалізація властивостей класу?
3. Для чого використовується вказівник `$this`?
4. Як можна викликати батьківський конструктор в конструкторі дочірнього класу?
5. За допомогою якого методу доступа можна отримати доступ з поточного та дочірнього класу?
6. Якою функцією можна імітувати роботу деструктора?
7. Для чого призначений оператор new?

## Довідники та додаткові матеріали

1. [Объекты данных PHP](https://www.php.net/manual/ru/book.pdo.php)
2. [PHP + PDO. Работа с MySQL](https://www.youtube.com/watch?v=a9l3QPMqZ1Q)
3. [PHP md5()](https://www.php.net/manual/ru/function.md5.php)
4. [Функции Hash](https://www.php.net/manual/ru/ref.hash.php)
5. [Session Handling](https://www.php.net/manual/en/book.session.php)
6. [PHP Sessions](https://www.w3schools.com/php/php_sessions.asp)

## Альтернатвні теми за варіантами

Варіяант для виконання самостійних завдань

1. Каталог товарів продуктового магазину
2. Каталог книг у бібліотеці
3. Дошка оголошень
4. Фотогалерея
5. Каталог запчастин автомобілів
6. Індивідуальний електронний записник
7. Каталог рієлтора
8. Каталог бази будівельних матеріалів
9. Власний блог
10. Розклад маршрутів автовокзалу